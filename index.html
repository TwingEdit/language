<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastery English | AkÄ±llÄ± Hoca</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --p: #6366f1; --s: #10b981; --bg: #0f172a; --card: #1e293b; }
        body { font-family: 'Fredoka', sans-serif; background: var(--bg); color: #f8fafc; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; }
        .card { background: var(--card); padding: 30px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); border: 1px solid #334155; }
        .hidden { display: none; }
        .btn { background: var(--p); color: white; padding: 15px 30px; border-radius: 15px; border: none; cursor: pointer; font-size: 1.1rem; font-weight: 600; width: 100%; transition: 0.3s; }
        .btn:hover { background: #4f46e5; transform: translateY(-2px); }
        .opt { display: block; width: 100%; padding: 15px; margin: 10px 0; background: #334155; border: 2px solid transparent; border-radius: 12px; color: white; text-align: left; cursor: pointer; }
        .opt:hover { border-color: var(--p); }
        
        /* Hoca AnlatÄ±m Kutusu */
        .teacher-box { background: #312e81; padding: 25px; border-radius: 20px; border-left: 8px solid var(--s); margin: 20px 0; }
        .word-card { background: #1e1b4b; padding: 15px; border-radius: 12px; border: 1px dashed var(--s); margin: 10px 0; }
        .step-title { color: var(--s); font-size: 1.4rem; margin-bottom: 15px; display: block; }
        .progress { height: 8px; background: #334155; border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--s); width: 0%; transition: 0.3s; }
    </style>
</head>
<body>

<div class="container">
    <div id="home-screen" class="card">
        <h1 style="text-align:center; font-size: 2.5rem;">Selam! ğŸ‘‹</h1>
        <p style="text-align:center; color: #94a3b8;">Ã–nce 40 soruyla seni bir tartalÄ±m, sonra eksiklerini tane tane, en basit haliyle beraber Ã§alÄ±ÅŸalÄ±m.</p>
        <button class="btn" onclick="startQuiz()">Hadi BaÅŸlayalÄ±m</button>
    </div>

    <div id="quiz-screen" class="card hidden">
        <div class="progress"><div id="bar" class="progress-fill"></div></div>
        <div id="q-meta" style="font-size: 0.9rem; color: var(--p); margin-bottom: 5px;"></div>
        <h2 id="q-text" style="margin-top: 0;"></h2>
        <div id="options"></div>
    </div>

    <div id="study-screen" class="card hidden">
        <h2 style="margin-top:0;">Ders Vakti! ğŸ“š</h2>
        <p id="result-summary"></p>
        <div id="lesson-content"></div>
        <button class="btn" style="margin-top:20px; background:#334155;" onclick="location.reload()">BaÅŸtan BaÅŸla</button>
    </div>
</div>

<script>
    // 40 Soruluk KapsamlÄ± Veri Seti
    const db = [
        { q: "I ___ to school every day.", a: ["go", "goes", "going"], c: 0, t: "Present Simple", lv: "A2", 
          lesson: "Bak ÅŸimdi kardeÅŸim; 'I, You, We, They' tayfasÄ± fiili olduÄŸu gibi bÄ±rakÄ±r, yanÄ±na hiÃ§bir ÅŸey almaz. Ama 'He, She, It' gelirse fiilin sonuna 's' takÄ±sÄ± yapÄ±ÅŸtÄ±rÄ±rÄ±z. Bu kadar!",
          words: ["Every day: Her gÃ¼n", "Always: Her zaman"] },
        
        { q: "Where ___ you yesterday?", a: ["was", "were", "did"], c: 1, t: "To Be (Past)", lv: "A2",
          lesson: "GeÃ§miÅŸten bahsederken 'olmak' fiili deÄŸiÅŸir. I/He/She/It iÃ§in WAS, ama You/We/They iÃ§in WERE kullanÄ±rÄ±z. 'Sen dÃ¼ndeydin' derken 'You were' diyoruz.",
          words: ["Yesterday: DÃ¼n", "Last night: DÃ¼n gece"] },

        { q: "The cake ___ by my mom.", a: ["made", "was made", "is made"], c: 1, t: "Passive Voice", lv: "B1",
          lesson: "Ä°ÅŸi yapan deÄŸil de iÅŸten etkilenen Ã¶nemliyse (kek gibi), araya bir 'yardÄ±mcÄ±' (was/were) bir de fiilin 3. hali (V3) girer. Kek kendi kendini yapamaz ya!",
          words: ["By: TarafÄ±ndan", "Made: YapÄ±lmÄ±ÅŸ"] },

        { q: "If I ___ rich, I would buy a jet.", a: ["am", "was", "were"], c: 2, t: "Conditionals", lv: "B1",
          lesson: "Burada bir hayal kuruyoruz. 'EÄŸer olsaydÄ±m' derken Ä°ngilizler kural gereÄŸi 'I was' yerine 'I were' derler. Hayal dÃ¼nyasÄ±nda kurallar biraz farklÄ±dÄ±r.",
          words: ["If: EÄŸer", "Wealthy: Zengin"] }
        // ... (Burada 40 soruya tamamlanacak liste devam ediyor)
    ];

    let current = 0;
    let score = 0;
    let wrongTopics = [];

    function startQuiz() {
        document.getElementById('home-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        loadQ();
    }

    function loadQ() {
        const q = db[current];
        document.getElementById('bar').style.width = ((current+1)/db.length*100) + "%";
        document.getElementById('q-meta').innerText = `Soru ${current+1} / ${db.length}`;
        document.getElementById('q-text').innerText = q.q;
        
        const opts = document.getElementById('options');
        opts.innerHTML = '';
        q.a.forEach((o, i) => {
            const b = document.createElement('button');
            b.className = 'opt';
            b.innerText = o;
            b.onclick = () => {
                if(i === q.c) score++;
                else wrongTopics.push(q);
                
                current++;
                if(current < db.length) loadQ();
                else showStudy();
            };
            opts.appendChild(b);
        });
    }

    function showStudy() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('study-screen').classList.remove('hidden');
        
        document.getElementById('result-summary').innerHTML = `Test bitti! 40 soruda <b>${score}</b> doÄŸru yaptÄ±n. Åimdi gel, takÄ±ldÄ±ÄŸÄ±n yerleri en basit haliyle halledelim:`;
        
        const lessonDiv = document.getElementById('lesson-content');
        lessonDiv.innerHTML = '';

        if(wrongTopics.length === 0) {
            lessonDiv.innerHTML = "<div class='teacher-box'>Valla helal olsun! HiÃ§ yanlÄ±ÅŸÄ±n yok. Sen buralarda harcanma, git direkt dizi izle!</div>";
            return;
        }

        // Benzersiz konularÄ± alalÄ±m
        let seen = new Set();
        wrongTopics.forEach(item => {
            if(!seen.has(item.t)) {
                const box = document.createElement('div');
                box.className = 'teacher-box';
                box.innerHTML = `
                    <span class="step-title">ğŸ“ Konu: ${item.t}</span>
                    <p>${item.lesson}</p>
                    <div style="margin-top:15px;"><b>Bu konunun anahtar kelimeleri:</b></div>
                    ${item.words.map(w => `<div class="word-card">ğŸ”¹ ${w}</div>`).join('')}
                `;
                lessonDiv.appendChild(box);
                seen.add(item.t);
            }
        });
    }
</script>
</body>
</html>
