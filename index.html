<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Mentor | Level Test & Study</title>
    <style>
        :root { --primary: #1a73e8; --success: #34a853; --bg: #f8f9fa; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .container { max-width: 700px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .hidden { display: none; }
        .quiz-option { display: block; width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; text-align: left; background: white; }
        .quiz-option:hover { background: #f1f3f4; border-color: var(--primary); }
        .result-box { border-left: 5px solid var(--primary); padding: 15px; background: #e8f0fe; margin-top: 20px; }
        .study-card { margin-top: 15px; padding: 15px; border: 1px solid #eee; border-radius: 8px; }
        button#start-btn { background: var(--primary); color: white; border: none; padding: 15px 30px; border-radius: 8px; cursor: pointer; font-size: 1.1rem; }
    </style>
</head>
<body>

<div class="container" id="main-container">
    <div id="intro-screen">
        <h1>HoÅŸ Geldin! ðŸ‘‹</h1>
        <p>Ä°ngilizce seviyeni belirleyelim ve eksiklerine gÃ¶re bir yol haritasÄ± Ã§Ä±karalÄ±m.</p>
        <button id="start-btn" onclick="startQuiz()">Seviye Testine BaÅŸla</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <h2 id="question-text">Soru buraya gelecek...</h2>
        <div id="options-container"></div>
    </div>

    <div id="result-screen" class="hidden">
        <h2>Analiz Sonucun ðŸ“Š</h2>
        <div class="result-box" id="level-result"></div>
        <h3>Senin Ä°Ã§in Ã–nerilen Ã‡alÄ±ÅŸmalar:</h3>
        <div id="study-recommendations"></div>
        <button onclick="location.reload()" style="margin-top:20px; padding:10px; cursor:pointer;">Testi Tekrarla</button>
    </div>
</div>

<script>
    const questions = [
        { q: "I ___ to the cinema yesterday.", a: ["go", "gone", "went", "goes"], correct: 2, level: "A2", skill: "Past Tense" },
        { q: "If I ___ rich, I would travel the world.", a: ["am", "was", "were", "be"], correct: 2, level: "B1", skill: "Conditionals" },
        { q: "The room ___ every day by the staff.", a: ["cleans", "is cleaned", "cleaned", "is clean"], correct: 1, level: "B1", skill: "Passive Voice" },
        { q: "I have been living here ___ 2010.", a: ["for", "since", "at", "in"], correct: 1, level: "A2", skill: "Present Perfect" },
        { q: "By next year, I ___ my degree.", a: ["will finish", "finish", "will have finished", "am finishing"], correct: 2, level: "B2", skill: "Future Perfect" }
    ];

    let currentQ = 0;
    let score = { A2: 0, B1: 0, B2: 0 };
    let gaps = [];

    function startQuiz() {
        document.getElementById('intro-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        const q = questions[currentQ];
        document.getElementById('question-text').innerText = q.q;
        const container = document.getElementById('options-container');
        container.innerHTML = '';
        q.a.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'quiz-option';
            btn.innerText = opt;
            btn.onclick = () => handleAnswer(index);
            container.appendChild(btn);
        });
    }

    function handleAnswer(index) {
        const q = questions[currentQ];
        if(index === q.correct) {
            score[q.level]++;
        } else {
            gaps.push(q.skill);
        }
        
        currentQ++;
        if(currentQ < questions.length) { showQuestion(); } 
        else { showResults(); }
    }

    function showResults() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        
        let finalLevel = score.B2 > 0 ? "B2" : (score.B1 > 0 ? "B1" : "A2");
        document.getElementById('level-result').innerHTML = `Tahmini Seviyen: <strong>${finalLevel}</strong><br>DoÄŸru SayÄ±sÄ±: ${score.A2 + score.B1 + score.B2} / 5`;
        
        const recBox = document.getElementById('study-recommendations');
        if(gaps.length > 0) {
            gaps.forEach(gap => {
                const card = document.createElement('div');
                card.className = 'study-card';
                card.innerHTML = `<strong>Eksik Konu: ${gap}</strong><br>Bu konuyu tekrar etmen gerekiyor.`;
                recBox.appendChild(card);
            });
        } else {
            recBox.innerHTML = "<p>Harika! TÃ¼m konulara hakimsin. B2 Ã¼stÃ¼ akademik metinlere geÃ§ebilirsin.</p>";
        }
    }
</script>
</body>
</html>
