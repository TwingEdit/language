<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Mastery | Level Finder</title>
    <style>
        :root { --main: #2563eb; --bg: #fdfdfd; --text: #1e293b; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .app-card { width: 90%; max-width: 600px; background: white; padding: 40px; border-radius: 24px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); text-align: center; }
        .hidden { display: none; }
        .option-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #e2e8f0; border-radius: 12px; background: none; cursor: pointer; transition: 0.2s; font-size: 1rem; }
        .option-btn:hover { border-color: var(--main); background: #eff6ff; }
        .progress-bar { height: 6px; background: #e2e8f0; border-radius: 3px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--main); width: 0%; transition: 0.3s; }
        .result-tag { font-size: 3rem; font-weight: 800; color: var(--main); margin: 10px 0; }
        .topic-list { text-align: left; background: #f8fafc; padding: 20px; border-radius: 12px; margin-top: 20px; }
        button#start-btn { background: var(--main); color: white; border: none; padding: 16px 40px; border-radius: 12px; font-size: 1.1rem; cursor: pointer; }
    </style>
</head>
<body>

<div class="app-card" id="app">
    <div id="step-1">
        <h1 style="font-size: 2.5rem;">Ready? ðŸ‡¬ðŸ‡§</h1>
        <p>HiÃ§ vakit kaybetmeden seviyeni belirleyelim. 10 soruluk hÄ±zlÄ± bir test seni bekliyor.</p>
        <button id="start-btn" onclick="initQuiz()">Teste BaÅŸla</button>
    </div>

    <div id="step-2" class="hidden">
        <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
        <h2 id="q-text" style="margin-bottom: 25px;">Soru YÃ¼kleniyor...</h2>
        <div id="options"></div>
    </div>

    <div id="step-3" class="hidden">
        <h2>Analiz TamamlandÄ±!</h2>
        <p>Senin Ä°ngilizce profilin:</p>
        <div class="result-tag" id="level-id">B1</div>
        <div class="topic-list" id="feedback">
            </div>
        <button onclick="location.reload()" style="margin-top:20px; border:none; background:none; color:var(--main); cursor:pointer;">Yeniden Test Yap</button>
    </div>
</div>

<script>
    const questions = [
        { q: "She ___ (watch) TV every evening.", a: ["watch", "watches", "watching"], c: 1, lv: "A2", t: "Present Simple" },
        { q: "Where ___ you go last summer?", a: ["do", "did", "were"], c: 1, lv: "A2", t: "Past Simple" },
        { q: "I haven't finished my homework ___.", a: ["already", "just", "yet"], c: 2, lv: "A2", t: "Present Perfect" },
        { q: "The cake ___ by my mother yesterday.", a: ["made", "was made", "is made"], c: 1, lv: "B1", t: "Passive Voice" },
        { q: "If it rains, we ___ at home.", a: ["stay", "would stay", "will stay"], c: 2, lv: "B1", t: "Conditionals" },
        { q: "I wish I ___ more time to study.", a: ["have", "had", "would have"], c: 1, lv: "B1", t: "Wish Clauses" },
        { q: "He suggested ___ to the park.", a: ["to go", "going", "go"], c: 1, lv: "B2", t: "Gerunds & Infinitives" },
        { q: "Hardly ___ I entered the room when the phone rang.", a: ["did", "had", "was"], c: 1, lv: "B2", t: "Inversion" },
        { q: "I'd rather you ___ tell anyone.", a: ["don't", "didn't", "not"], c: 1, lv: "B2", t: "Preference" },
        { q: "By this time tomorrow, I ___ my exam.", a: ["will finish", "will be finishing", "will have finished"], c: 2, lv: "B2", t: "Future Perfect" }
    ];

    let current = 0;
    let wrongTopics = [];
    let points = 0;

    function initQuiz() {
        document.getElementById('step-1').classList.add('hidden');
        document.getElementById('step-2').classList.remove('hidden');
        loadQuestion();
    }

    function loadQuestion() {
        const q = questions[current];
        document.getElementById('q-text').innerText = q.q;
        document.getElementById('progress').style.width = (current / questions.length * 100) + "%";
        
        const optDiv = document.getElementById('options');
        optDiv.innerHTML = '';
        q.a.forEach((opt, i) => {
            const b = document.createElement('button');
            b.className = 'option-btn';
            b.innerText = opt;
            b.onclick = () => {
                if(i === q.c) points++;
                else wrongTopics.push({topic: q.t, level: q.lv});
                
                current++;
                if(current < questions.length) loadQuestion();
                else showFinal();
            };
            optDiv.appendChild(b);
        });
    }

    function showFinal() {
        document.getElementById('step-2').classList.add('hidden');
        document.getElementById('step-3').classList.remove('hidden');
        
        let finalLv = "A2";
        if(points > 4) finalLv = "B1";
        if(points > 7) finalLv = "B2";
        
        document.getElementById('level-id').innerText = finalLv;
        
        let feedbackHTML = "<strong>Odaklanman gereken konular:</strong><ul>";
        if(wrongTopics.length > 0) {
            wrongTopics.forEach(w => {
                feedbackHTML += `<li>${w.topic} (${w.level})</li>`;
            });
        } else {
            feedbackHTML += "<li>TÃ¼m konulara hakimsin! Harika!</li>";
        }
        feedbackHTML += "</ul>";
        document.getElementById('feedback').innerHTML = feedbackHTML;
    }
</script>
</body>
</html>
