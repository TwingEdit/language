<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastery English | AI-Powered Learning</title>
    <style>
        :root { --p: #4f46e5; --s: #10b981; --err: #ef4444; --bg: #f8fafc; --card: #ffffff; }
        body { font-family: 'Inter', system-ui, sans-serif; background: var(--bg); color: #1e293b; margin: 0; line-height: 1.6; }
        
        /* Ana Ekran TasarÄ±mÄ± */
        .hero { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); color: white; text-align: center; padding: 20px; }
        .btn-main { background: white; color: var(--p); padding: 18px 45px; border-radius: 50px; font-weight: 700; border: none; cursor: pointer; font-size: 1.2rem; transition: 0.3s; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .btn-main:hover { transform: translateY(-3px); box-shadow: 0 15px 25px rgba(0,0,0,0.2); }

        /* Test AlanÄ± */
        .container { max-width: 800px; margin: 40px auto; padding: 20px; }
        .card { background: var(--card); padding: 40px; border-radius: 24px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .hidden { display: none; }
        .q-text { font-size: 1.4rem; font-weight: 600; margin-bottom: 25px; }
        .opt { display: block; width: 100%; padding: 16px; margin: 12px 0; border: 2px solid #e2e8f0; border-radius: 12px; background: white; cursor: pointer; transition: 0.2s; text-align: left; font-size: 1rem; }
        .opt:hover { border-color: var(--p); background: #f5f3ff; }
        
        /* SonuÃ§ ve Analiz */
        .analysis-item { border-bottom: 1px solid #eee; padding: 15px 0; }
        .correct-ans { color: var(--s); font-weight: bold; }
        .wrong-ans { color: var(--err); text-decoration: line-through; }
        .lesson-box { background: #eff6ff; padding: 20px; border-radius: 15px; margin-top: 20px; border-left: 6px solid var(--p); }
        
        .progress-container { width: 100%; height: 8px; background: #e2e8f0; border-radius: 10px; margin-bottom: 30px; }
        .progress-bar { height: 100%; background: var(--s); width: 0%; transition: 0.3s; }
    </style>
</head>
<body>

<div id="hero" class="hero">
    <h1 style="font-size: 3.5rem; margin-bottom: 10px;">Mastery English</h1>
    <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 30px;">40 Soruluk Yapay Zeka Destekli Seviye Analizi</p>
    <button class="btn-main" onclick="startTest()">Analize BaÅŸla</button>
</div>

<div id="test-area" class="container hidden">
    <div class="progress-container"><div id="progress" class="progress-bar"></div></div>
    <div class="card">
        <div id="q-number" style="color: var(--p); font-weight: bold; margin-bottom: 10px;">Soru 1/40</div>
        <div id="q-text" class="q-text">Soru yÃ¼kleniyor...</div>
        <div id="options"></div>
    </div>
</div>

<div id="result-area" class="container hidden">
    <div class="card">
        <h1>Analiz Raporun ðŸ“‘</h1>
        <div id="score-summary" style="font-size: 1.5rem; margin-bottom: 20px;"></div>
        <div id="detailed-analysis"></div>
        <hr>
        <h3>Ã–zel Ders ProgramÄ±n</h3>
        <div id="study-lessons"></div>
    </div>
</div>

<script>
    // 40 Soruluk Veri Seti (Ã–zetlendi, hepsini buraya ekleyebilirsin)
    const questions = [
        { q: "I ___ to the gym every morning.", a: ["goes", "go", "going"], c: 1, t: "Present Simple", d: "GeniÅŸ zamanlarda 'I' Ã¶znesi takÄ± almaz.", lv: "A2" },
        { q: "Yesterday, I ___ a giant pizza.", a: ["eat", "eaten", "ate"], c: 2, t: "Past Simple", d: "GeÃ§miÅŸ zamanda dÃ¼zensiz fiillerin 2. hali kullanÄ±lÄ±r.", lv: "A2" },
        { q: "This house ___ in 1950.", a: ["built", "was built", "is built"], c: 1, t: "Passive Voice", d: "GeÃ§miÅŸteki edilgen yapÄ±larda 'was/were + V3' kullanÄ±lÄ±r.", lv: "B1" },
        // ... Buraya 40 soruya kadar ekleme yapÄ±labilir. Åžimdilik mantÄ±ÄŸÄ± kuruyoruz.
        { q: "If I ___ you, I wouldn't do that.", a: ["am", "was", "were"], c: 2, t: "Conditionals", d: "Hayali durumlarda (Type 2) 'were' tercih edilir.", lv: "B1" },
        { q: "By next month, we ___ the project.", a: ["finish", "will have finished", "will finish"], c: 1, t: "Future Perfect", d: "Belirli bir zamana kadar bitmiÅŸ olacak iÅŸler iÃ§in kullanÄ±lÄ±r.", lv: "B2" }
        // (40 soruya tamamlamak iÃ§in benzer yapÄ±da sorular eklenecek)
    ];

    let current = 0;
    let userAnswers = [];
    let score = 0;

    function startTest() {
        document.getElementById('hero').classList.add('hidden');
        document.getElementById('test-area').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        const q = questions[current];
        document.getElementById('q-text').innerText = q.q;
        document.getElementById('q-number').innerText = `Soru ${current + 1}/${questions.length}`;
        document.getElementById('progress').style.width = ((current+1)/questions.length*100) + "%";
        
        const optDiv = document.getElementById('options');
        optDiv.innerHTML = '';
        q.a.forEach((option, i) => {
            const btn = document.createElement('button');
            btn.className = 'opt';
            btn.innerText = option;
            btn.onclick = () => next(i);
            optDiv.appendChild(btn);
        });
    }

    function next(ui) {
        userAnswers.push({
            question: questions[current].q,
            userAns: questions[current].a[ui],
            correctAns: questions[current].a[questions[current].c],
            isRight: ui === questions[current].c,
            topic: questions[current].t,
            desc: questions[current].d
        });
        
        if(ui === questions[current].c) score++;
        
        current++;
        if(current < questions.length) showQuestion();
        else showResults();
    }

    function showResults() {
        document.getElementById('test-area').classList.add('hidden');
        document.getElementById('result-area').classList.remove('hidden');
        
        document.getElementById('score-summary').innerText = `PuanÄ±n: ${score} / ${questions.length}`;
        
        let analysisHTML = "<h3>YanlÄ±ÅŸ Analizi</h3>";
        let lessonHTML = "";
        let seenTopics = new Set();

        userAnswers.forEach(ans => {
            if(!ans.isRight) {
                analysisHTML += `
                    <div class="analysis-item">
                        <strong>Soru:</strong> ${ans.question}<br>
                        <strong>Senin CevabÄ±n:</strong> <span class="wrong-ans">${ans.userAns}</span><br>
                        <strong>DoÄŸru Cevap:</strong> <span class="correct-ans">${ans.correctAns}</span>
                    </div>`;
                
                if(!seenTopics.has(ans.topic)) {
                    lessonHTML += `
                        <div class="lesson-box">
                            <h4>Konu: ${ans.topic}</h4>
                            <p>${ans.desc}</p>
                            <small>PekiÅŸtirme Ã–devi: Bu konuyla ilgili 5 cÃ¼mle kur.</small>
                        </div>`;
                    seenTopics.add(ans.topic);
                }
            }
        });
        
        document.getElementById('detailed-analysis').innerHTML = analysisHTML;
        document.getElementById('study-lessons').innerHTML = lessonHTML || "<p>MÃ¼kemmel! HiÃ§ yanlÄ±ÅŸÄ±n yok.</p>";
    }
</script>
</body>
</html>
