<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Analiz | Mastery English</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0b0f1a; --card: #161e2d; --p: #6366f1; --s: #10b981; }
        body { background: var(--bg); color: white; font-family: 'Outfit', sans-serif; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 40px auto; }
        .card { background: var(--card); padding: 40px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.05); }
        .q-count { color: var(--p); font-weight: 800; margin-bottom: 5px; }
        .progress-container { width: 100%; height: 12px; background: #1f2937; border-radius: 20px; margin-bottom: 30px; position: relative; }
        #bar { height: 100%; background: linear-gradient(90deg, #6366f1, #34d399); width: 0%; border-radius: 20px; transition: 0.4s; }
        .opt { display: block; width: 100%; padding: 18px; margin-bottom: 12px; background: #1f2937; border: 2px solid transparent; border-radius: 16px; color: #94a3b8; text-align: left; cursor: pointer; font-size: 1.1rem; }
        .opt:hover { border-color: var(--p); color: white; background: #2d3748; }
        .hidden { display: none; }
        .report-card { background: #1e1b4b; padding: 20px; border-radius: 15px; margin-bottom: 10px; border-left: 5px solid var(--s); }
    </style>
</head>
<body>
    <div class="container" id="quiz-area">
        <div class="q-count">SORU: <span id="current-q">1</span> / 40</div>
        <div class="progress-container"><div id="bar"></div></div>
        <div class="card">
            <h2 id="q-text" style="margin-bottom:30px;">YÃ¼kleniyor...</h2>
            <div id="options"></div>
        </div>
    </div>

    <div class="container hidden" id="result-area">
        <div class="card">
            <h1 style="font-size: 2.5rem;">Analiz Raporun ðŸ“Š</h1>
            <p style="color: #94a3b8; margin-bottom: 30px;">HatalarÄ±na gÃ¶re Ã§alÄ±ÅŸman gereken konular:</p>
            <div id="report-list"></div>
            <a href="calisma.html" style="display:block; background:var(--s); color:white; text-align:center; padding:20px; border-radius:15px; text-decoration:none; font-weight:800; margin-top:20px;">AKADEMÄ°YE GÄ°T</a>
        </div>
    </div>

<script>
    const db = [
        { q: "I ___ to school every day.", a: ["go", "goes", "going"], c: 0, t: "Present Simple" },
        { q: "Where ___ you yesterday?", a: ["was", "were", "did"], c: 1, t: "Past To-Be" },
        { q: "She has ___ her homework.", a: ["do", "did", "done"], c: 2, t: "Present Perfect" },
        { q: "If I ___ you, I would stay.", a: ["am", "was", "were"], c: 2, t: "Conditionals Type 2" },
        { q: "The book ___ by Orhan Pamuk.", a: ["was written", "wrote", "is writing"], c: 0, t: "Passive Voice" }
        // ... (Bu liste 40'a tamamlanabilir)
    ];

    let cur = 0, mistakes = new Set();
    function load() {
        if(cur >= db.length) return finish();
        document.getElementById('current-q').innerText = cur + 1;
        document.getElementById('bar').style.width = ((cur+1)/db.length*100) + "%";
        document.getElementById('q-text').innerText = db[cur].q;
        const box = document.getElementById('options'); box.innerHTML = '';
        db[cur].a.forEach((o, i) => {
            const b = document.createElement('button'); b.className='opt'; b.innerText=o;
            b.onclick = () => { if(i !== db[cur].c) mistakes.add(db[cur].t); cur++; load(); };
            box.appendChild(b);
        });
    }
    function finish() {
        document.getElementById('quiz-area').classList.add('hidden');
        document.getElementById('result-area').classList.remove('hidden');
        const list = document.getElementById('report-list');
        mistakes.forEach(m => list.innerHTML += `<div class="report-card"><b>Eksik Konu:</b> ${m}</div>`);
    }
    load();
</script>
</body>
</html>
