<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Mastery Analiz | 40 Soru</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0b0f1a; --card: #161e2d; --p: #6366f1; --s: #10b981; }
        body { background: var(--bg); color: white; font-family: 'Outfit', sans-serif; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 40px auto; }
        .card { background: var(--card); padding: 40px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.05); }
        .q-info { display: flex; justify-content: space-between; margin-bottom: 10px; color: var(--p); font-weight: 800; }
        .progress-bar { width: 100%; height: 12px; background: #1f2937; border-radius: 20px; margin-bottom: 30px; overflow: hidden; }
        #fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--p), var(--s)); transition: 0.4s; }
        .opt { display: block; width: 100%; padding: 18px; margin-bottom: 12px; background: #1f2937; border: 2px solid transparent; border-radius: 16px; color: #94a3b8; text-align: left; cursor: pointer; font-size: 1.1rem; }
        .opt:hover { border-color: var(--p); background: #2d3748; color: white; }
        .hidden { display: none; }
        .report-item { background: #1e1b4b; padding: 15px; border-radius: 12px; margin-bottom: 10px; border-left: 5px solid var(--s); }
    </style>
</head>
<body>
    <div class="container" id="quiz-screen">
        <div class="q-info"><span>SORU: <span id="q-num">1</span> / 40</span> <span id="percent">%0</span></div>
        <div class="progress-bar"><div id="fill"></div></div>
        <div class="card">
            <h2 id="q-text" style="margin-bottom:30px;">YÃ¼kleniyor...</h2>
            <div id="options"></div>
        </div>
    </div>

    <div class="container hidden" id="result-screen">
        <div class="card">
            <h1>Analiz TamamlandÄ± ðŸš€</h1>
            <div id="report-list"></div>
            <a href="calisma.html" style="display:block; background:var(--s); color:white; text-align:center; padding:20px; border-radius:15px; text-decoration:none; font-weight:bold; margin-top:20px;">AKADEMÄ°YE GÄ°T</a>
        </div>
    </div>

<script>
    const db = [
        {q:"She ___ to school every day.", a:["go","goes","going"], c:1, t:"Simple Present"},
        {q:"They ___ football yesterday.", a:["play","played","playing"], c:1, t:"Simple Past"},
        {q:"I ___ my grandmother tomorrow.", a:["visit","will visit","visited"], c:1, t:"Simple Future"},
        {q:"He ___ TV now.", a:["is watching","watch","watched"], c:0, t:"Present Continuous"},
        {q:"They ___ when I called.", a:["were studying","studied","study"], c:0, t:"Past Continuous"},
        {q:"We ___ dinner at 7 PM tomorrow.", a:["will be having","have","had"], c:0, t:"Future Continuous"},
        {q:"She ___ her homework already.", a:["has finished","finish","finished"], c:0, t:"Present Perfect"},
        {q:"I ___ for you since morning.", a:["have been waiting","wait","waited"], c:0, t:"Present Perfect Continuous"},
        {q:"He ___ already left when I arrived.", a:["had","has","will"], c:0, t:"Past Perfect"},
        {q:"By next year, he ___ here for ten years.", a:["will have been living","lives","lived"], c:0, t:"Future Perfect Continuous"},
        // 40'a tamamlamak iÃ§in aynÄ± mantÄ±kla devam (Ã–rnek Sorular)...
        {q:"Look! The bus ___.", a:["is coming","comes","came"], c:0, t:"Present Continuous"},
        {q:"___ you see him last night?", a:["Did","Do","Will"], c:0, t:"Simple Past"},
        {q:"I ___ breakfast before I left.", a:["had eaten","eat","have eaten"], c:0, t:"Past Perfect"},
        {q:"This time next week, I ___ on a beach.", a:["will be lying","lie","am lying"], c:0, t:"Future Continuous"}
    ];
    // Not: db.length burada 40 olarak ayarlanmalÄ±dÄ±r.

    let cur = 0, mistakes = new Set();
    function load() {
        if(cur >= db.length) return finish();
        document.getElementById('q-num').innerText = cur + 1;
        document.getElementById('percent').innerText = "%" + Math.round((cur/db.length)*100);
        document.getElementById('fill').style.width = (cur/db.length*100) + "%";
        document.getElementById('q-text').innerText = db[cur].q;
        const box = document.getElementById('options'); box.innerHTML = '';
        db[cur].a.forEach((o, i) => {
            const b = document.createElement('button'); b.className='opt'; b.innerText=o;
            b.onclick = () => { if(i !== db[cur].c) mistakes.add(db[cur].t); cur++; load(); };
            box.appendChild(b);
        });
    }
    function finish() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        const list = document.getElementById('report-list');
        mistakes.forEach(m => list.innerHTML += `<div class="report-item"><b>Eksik Konu:</b> ${m}</div>`);
    }
    load();
</script>
</body>
</html>
