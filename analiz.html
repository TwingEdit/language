<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Mastery Academy | Seviye Analizi</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0b1120; --card: #161e2d; --p: #6366f1; --s: #10b981; --err: #f43f5e; }
        body { background: var(--bg); color: white; font-family: 'Outfit', sans-serif; margin: 0; padding: 20px; }
        
        .container { max-width: 900px; margin: 50px auto; }
        
        /* Progress Bar (GÃ¶rseldeki TasarÄ±m) */
        .header-meta { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: 600; color: var(--p); }
        .progress-container { background: #1f2937; height: 10px; border-radius: 10px; margin-bottom: 40px; overflow: hidden; }
        .progress-bar { background: linear-gradient(90deg, var(--p), var(--s)); width: 0%; height: 100%; transition: 0.5s; }

        .layout { display: grid; grid-template-columns: 1fr 1.5fr; gap: 30px; }
        
        /* Sol Panel: Rehber */
        .guide-box { background: var(--card); padding: 30px; border-radius: 20px; border: 1px solid #334155; height: fit-content; }
        .guide-box h2 { color: var(--s); display: flex; align-items: center; gap: 10px; margin-top: 0; }
        
        /* SaÄŸ Panel: Soru AlanÄ± */
        .quiz-box { background: var(--card); padding: 40px; border-radius: 20px; border: 1px solid #334155; min-height: 300px; }
        .q-title { font-size: 1.4rem; font-weight: 800; margin-bottom: 25px; color: #f8fafc; }
        
        .opt { width: 100%; padding: 18px; margin-bottom: 12px; background: #1f2937; color: white; border: 1px solid #334155; border-radius: 12px; cursor: pointer; text-align: left; font-size: 1rem; transition: 0.2s; }
        .opt:hover { border-color: var(--p); background: #232d3f; }

        .result-screen { text-align: center; padding: 50px; }
        .level-badge { font-size: 4rem; font-weight: 800; color: var(--s); margin: 20px 0; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="header-meta">
        <span id="q-count">SORU: 1 / 40</span>
        <span id="progress-text">%0</span>
    </div>
    <div class="progress-container">
        <div id="bar" class="progress-bar"></div>
    </div>

    <div id="quiz-ui" class="layout">
        <div class="guide-box">
            <h2>Rehber ðŸ’¡</h2>
            <p id="guide-msg">Seviye Ã¶lÃ§Ã¼mÃ¼ yapÄ±lÄ±yor. LÃ¼tfen size en uygun seÃ§eneÄŸi iÅŸaretleyin.</p>
        </div>

        <div class="quiz-box">
            <div id="q-area">
                <div id="q-text" class="q-title">Analiz Sorusu 1</div>
                <div id="options-area"></div>
            </div>
        </div>
    </div>

    <div id="result-ui" class="result-screen hidden">
        <h1>Analiz TamamlandÄ±! ðŸŽ‰</h1>
        <p>Ä°ngilizce Seviyeniz:</p>
        <div id="final-level" class="level-badge">---</div>
        <p id="level-desc" style="color: #94a3b8; max-width: 500px; margin: auto;"></p>
        <br>
        <button onclick="location.href='index.html'" class="opt" style="text-align:center; width: 200px; margin: auto;">Ana Sayfaya DÃ¶n</button>
    </div>
</div>

<script>
    // A2'den B2'ye 40 Soruluk Havuz (Ã–rnek Sorular)
    const questions = [
        { q: "She ___ coffee every morning.", a: ["drink", "drinks", "is drinking"], c: 1, lv: "A2" },
        { q: "Where ___ you yesterday?", a: ["was", "were", "did"], c: 1, lv: "A2" },
        { q: "I have ___ to London twice.", a: ["be", "been", "go"], c: 1, lv: "B1" },
        { q: "If I ___ you, I wouldn't do that.", a: ["am", "was", "were"], c: 2, lv: "B2" },
        // ... (Sistem 40 soruya kadar aynÄ± mantÄ±kla devam eder)
    ];

    // SimÃ¼lasyon iÃ§in 40 soruya tamamla
    for(let i=5; i<=40; i++) {
        questions.push({ q: `Seviye Testi Sorusu ${i}: Uygun boÅŸluÄŸu doldurun.`, a: ["SeÃ§enek A", "SeÃ§enek B", "SeÃ§enek C"], c: 0, lv: i < 15 ? "A2" : i < 30 ? "B1" : "B2" });
    }

    let currentIdx = 0;
    let score = 0;

    function loadQuestion() {
        const q = questions[currentIdx];
        document.getElementById('q-count').innerText = `SORU: ${currentIdx + 1} / 40`;
        document.getElementById('q-text').innerText = q.q;
        
        const prog = Math.round(((currentIdx) / 40) * 100);
        document.getElementById('bar').style.width = prog + "%";
        document.getElementById('progress-text').innerText = "%" + prog;

        const optArea = document.getElementById('options-area');
        optArea.innerHTML = "";
        q.a.forEach((text, i) => {
            optArea.innerHTML += `<button class="opt" onclick="handleAnswer(${i})">${text}</button>`;
        });
    }

    function handleAnswer(idx) {
        if(idx === questions[currentIdx].c) score++;
        
        currentIdx++;
        if(currentIdx < questions.length) {
            loadQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        document.getElementById('quiz-ui').classList.add('hidden');
        document.getElementById('result-ui').classList.remove('hidden');
        document.getElementById('bar').style.width = "100%";
        document.getElementById('progress-text').innerText = "%100";

        let level = "A2";
        let desc = "Temel konulara hakimsiniz, geliÅŸmeye devam!";
        if(score > 15) { level = "B1"; desc = "Orta seviyedesiniz, karmaÅŸÄ±k cÃ¼mleler kurabiliyorsunuz."; }
        if(score > 30) { level = "B2"; desc = "Ãœst orta seviye! AkÄ±cÄ± konuÅŸmaya Ã§ok yakÄ±nsÄ±nÄ±z."; }

        document.getElementById('final-level').innerText = level;
        document.getElementById('level-desc').innerText = desc;
    }

    loadQuestion();
</script>
</body>
</html>
