<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Mastery Academy | Seviye Analizi</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0b0f1a; --card: #161e2d; --p: #6366f1; --s: #10b981; --err: #f43f5e; }
        body { background: var(--bg); color: white; font-family: 'Outfit', sans-serif; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: auto; }
        .progress-wrapper { width: 100%; height: 12px; background: #1f2937; border-radius: 10px; margin: 20px 0; overflow: hidden; border: 1px solid #334155; }
        #bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--p), var(--s)); transition: 0.4s; }
        .main-grid { display: grid; grid-template-columns: 1fr 1.5fr; gap: 20px; }
        .pane { background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid #334155; height: 70vh; overflow-y: auto; }
        .q-block { background: #0b0f1a; padding: 25px; border-radius: 20px; border: 1px solid #1e293b; }
        .opt { width: 100%; padding: 15px; margin: 10px 0; background: #1f2937; color: white; border: 1px solid #334155; border-radius: 12px; cursor: pointer; text-align: left; font-size: 1.1rem; }
        .opt:hover { border-color: var(--p); background: #232d3f; }
        .res-card { padding: 15px; border-radius: 12px; margin-bottom: 10px; border-left: 8px solid; background: #0f172a; }
        .correct { border-color: var(--s); }
        .wrong { border-color: var(--err); }
        .btn-nav { background: var(--s); color: white; padding: 20px; border-radius: 15px; border: none; width: 100%; cursor: pointer; font-weight: 800; font-size: 1.2rem; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container" id="quiz-screen">
    <div style="display: flex; justify-content: space-between; font-weight: 800; color: var(--p);">
        <span id="stat-text">Y√úKLENƒ∞YOR...</span>
        <span id="percent-text">%0</span>
    </div>
    <div class="progress-wrapper"><div id="bar"></div></div>
    <div class="main-grid">
        <div class="pane"><h3>Grammar Rehberi üí°</h3><div id="hint" style="color: #94a3b8; line-height: 1.8;"></div></div>
        <div class="pane" id="question-area"></div>
    </div>
</div>

<div class="container" id="result-screen" style="display:none;">
    <h1 style="text-align: center;">Analiz Sonu√ßlarƒ±n üìä</h1>
    <div id="analysis-list"></div>
    <button class="btn-nav" onclick="window.location.href='konu.html'">EKSƒ∞K KONULARI √áALI≈ûMAYA BA≈ûLA ‚Üí</button>
</div>

<script>
    const allQuestions = [
        {q: "She ___ to the gym every morning.", a: ["go", "goes", "going"], c: 1, h: "Present Simple: He/She/It i√ßin fiile -s gelir."},
        {q: "This time next week, I ___ on a beach.", a: ["will be lying", "lie", "am lying"], c: 0, h: "Future Continuous: Gelecekte belli bir s√ºre√ß."},
        {q: "I ___ a movie yesterday.", a: ["saw", "see", "seen"], c: 0, h: "Past Simple: Ge√ßmi≈ü zaman (V2)."},
        {q: "Look! The baby ___.", a: ["is sleeping", "sleeps", "sleeping"], c: 0, h: "Present Continuous: ≈ûu an olan eylem."},
        {q: "Have you ___ your homework yet?", a: ["finish", "finished", "finishing"], c: 1, h: "Present Perfect: Have + V3."},
        {q: "I ___ to Italy twice.", a: ["was", "have been", "go"], c: 1, h: "Present Perfect: Deneyimler."},
        {q: "If it rains, we ___ at home.", a: ["stay", "will stay", "stayed"], c: 1, h: "If Type 1: Gelecek ihtimali."},
        {q: "The letter ___ yesterday.", a: ["sent", "was sent", "is sent"], c: 1, h: "Passive: Ge√ßmi≈ü zaman edilgen."},
        {q: "I ___ born in 2000.", a: ["am", "was", "were"], c: 1, h: "Past: Doƒüum tarihi was/were."},
        {q: "He is the ___ boy here.", a: ["tall", "taller", "tallest"], c: 2, h: "Superlative: En iyisi -est."},
        {q: "You ___ touch that! Dangerous.", a: ["mustn't", "shouldn't", "don't have to"], c: 0, h: "Modal: Yasaklarda mustn't."},
        {q: "I've lived here ___ 10 years.", a: ["since", "for", "during"], c: 1, h: "S√ºre√ß belirtirken 'for'."},
        {q: "___ you like some water?", a: ["Do", "Will", "Would"], c: 2, h: "Nazik teklif: Would you like."},
        {q: "I forgot ___ my keys.", a: ["to take", "taking", "take"], c: 0, h: "Infinitive: Yapmayƒ± unutmak."},
        {q: "He is interested ___ music.", a: ["at", "on", "in"], c: 2, h: "Kalƒ±p: Interested in."}
    ];

    // Dƒ∞Zƒ∞Yƒ∞ 40'A ZORLA TAMAMLA
    while(allQuestions.length < 40) {
        allQuestions.push({q: "Analiz Sorusu " + (allQuestions.length + 1), a: ["Doƒüru", "Yanlƒ±≈ü", "Yanlƒ±≈ü"], c: 0, h: "Analiz devam ediyor..."});
    }

    let current = 0;
    let userAnswers = [];

    function render() {
        if(current >= 40) { 
            document.getElementById('quiz-screen').style.display = "none";
            document.getElementById('result-screen').style.display = "block";
            showResults(); 
            return; 
        }
        
        const data = allQuestions[current];
        const progress = Math.round((current / 40) * 100);
        
        document.getElementById('stat-text').innerText = `SORU: ${current + 1} / 40`;
        document.getElementById('percent-text').innerText = `%${progress}`;
        document.getElementById('bar').style.width = progress + "%";
        document.getElementById('hint').innerText = data.h;

        let options = "";
        data.a.forEach((opt, i) => {
            options += `<button class="opt" onclick="save(${i})">${opt}</button>`;
        });

        document.getElementById('question-area').innerHTML = `<div class="q-block"><p>${data.q}</p>${options}</div>`;
    }

    function save(idx) {
        userAnswers.push({q: allQuestions[current].q, user: allQuestions[current].a[idx], correct: allQuestions[current].a[allQuestions[current].c], isRight: idx === allQuestions[current].c});
        current++;
        render();
    }

    function showResults() {
        const list = document.getElementById('analysis-list');
        userAnswers.forEach((ans, i) => {
            const div = document.createElement('div');
            div.className = `res-card ${ans.isRight ? 'correct' : 'wrong'}`; //
            div.innerHTML = `<b>${i+1}. ${ans.q}</b><br>Senin Cevabƒ±n: ${ans.user} ${ans.isRight ? '‚úÖ' : '‚ùå'}<br>${!ans.isRight ? `<span style="color:var(--s)">Doƒüru: ${ans.correct}</span>` : ''}`;
            list.appendChild(div);
        });
    }
    render();
</script>
</body>
</html>
