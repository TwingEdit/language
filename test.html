<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Mastery English | 40 Soruluk Seviye Analizi</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0b0f1a; --card: #161e2d; --p: #6366f1; --s: #10b981; --err: #f43f5e; }
        body { background: var(--bg); color: white; font-family: 'Outfit', sans-serif; margin: 0; padding: 20px; }
        
        .container { max-width: 1100px; margin: auto; }
        .progress-wrapper { width: 100%; height: 10px; background: #1f2937; border-radius: 10px; margin: 20px 0; overflow: hidden; }
        #bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--p), var(--s)); transition: 0.3s; }
        
        .main-grid { display: grid; grid-template-columns: 1fr 1.5fr; gap: 20px; }
        .pane { background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid #334155; height: 75vh; overflow-y: auto; }
        
        .q-block { background: #0b0f1a; padding: 20px; border-radius: 15px; border: 1px solid #1e293b; margin-bottom: 20px; }
        .opt { width: 100%; padding: 14px; margin: 8px 0; background: #1f2937; color: white; border: 1px solid #334155; border-radius: 10px; cursor: pointer; text-align: left; font-size: 1rem; }
        .opt:hover { border-color: var(--p); background: #232d3f; }
        
        /* Sonu√ß Ekranƒ± */
        .res-card { padding: 15px; border-radius: 10px; margin-bottom: 10px; border-left: 5px solid; background: #0f172a; }
        .correct { border-color: var(--s); }
        .wrong { border-color: var(--err); }
        .btn-finish { background: var(--p); color: white; padding: 15px; border-radius: 10px; border: none; width: 100%; cursor: pointer; font-weight: 800; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container" id="quiz-screen">
    <div style="display: flex; justify-content: space-between; font-weight: 800; color: var(--p);">
        <span>LEVEL ANALYSIS</span>
        <span id="stat">1 / 40</span>
    </div>
    <div class="progress-wrapper"><div id="bar"></div></div>

    <div class="main-grid">
        <div class="pane">
            <h3>ƒ∞pucu & Kural üí°</h3>
            <div id="hint" style="color: #94a3b8; line-height: 1.6;">Y√ºkleniyor...</div>
        </div>
        <div class="pane" id="question-area">
            </div>
    </div>
</div>

<div class="container" id="result-screen" style="display:none;">
    <h1>Analiz Sonu√ßlarƒ±n üìä</h1>
    <div id="analysis-list"></div>
    <button class="btn-finish" onclick="window.location.href='konu.html'">EKSƒ∞KLERƒ∞Nƒ∞ √áALI≈ûMAYA BA≈ûLA ‚Üí</button>
</div>

<script>
    const questions = [
        // A2 SEVƒ∞YESƒ∞ (1-10)
        {q: "She ___ (watch) TV every night.", a: ["watch", "watches", "watching"], c: 1, h: "Present Simple: He/She/It i√ßin fiile -s gelir."},
        {q: "I ___ (see) a great movie yesterday.", a: ["saw", "see", "seen"], c: 0, h: "Past Simple: Ge√ßmi≈ü zamanda V2 (saw) kullanƒ±lƒ±r."},
        {q: "Look! The cat ___ (climb) the tree.", a: ["climbs", "climbing", "is climbing"], c: 2, h: "Present Continuous: ≈ûu an olan eylem am/is/are + ing."},
        {q: "Have you ___ (finish) your homework?", a: ["finish", "finished", "finishing"], c: 1, h: "Present Perfect: Have/Has + V3 kullanƒ±lƒ±r."},
        {q: "We ___ (go) to Japan next summer.", a: ["will go", "go", "went"], c: 0, h: "Future Simple: Gelecek zaman planƒ±/tahmini 'will'."},
        {q: "This room is ___ than the other one.", a: ["big", "bigger", "the biggest"], c: 1, h: "Comparison: ƒ∞ki ≈üeyi kƒ±yaslarken -er takƒ±sƒ±."},
        {q: "There isn't ___ water in the bottle.", a: ["some", "any", "no"], c: 1, h: "Any/Some: Olumsuz c√ºmlelerde 'any' kullanƒ±lƒ±r."},
        {q: "He is the ___ student in class.", a: ["good", "better", "best"], c: 2, h: "Superlative: En iyisi derken 'the best'."},
        {q: "___ you speak English?", a: ["Do", "Does", "Are"], c: 0, h: "Question: I/You/We/They i√ßin 'Do' ile soru sorulur."},
        {q: "I ___ (be) born in 1995.", a: ["am", "was", "were"], c: 1, h: "Past: Doƒüum tarihi belirtirken 'was/were' kullanƒ±lƒ±r."},

        // B1 SEVƒ∞YESƒ∞ (11-20)
        {q: "You ___ touch that! It's dangerous.", a: ["mustn't", "don't have to", "shouldn't"], c: 0, h: "Modal: Kesin yasaklarda 'mustn't' kullanƒ±lƒ±r."},
        {q: "If I ___ (be) you, I would study more.", a: ["am", "was", "were"], c: 2, h: "If Type 2: Hayali durumlarda I ile 'were' kullanƒ±lƒ±r."},
        {q: "The letter ___ (send) yesterday.", a: ["sent", "was sent", "is sent"], c: 1, h: "Passive: Ge√ßmi≈ü zaman edilgen (was/were + V3)."},
        {q: "I have been waiting ___ two hours.", a: ["since", "for", "during"], c: 1, h: "Period: S√ºre√ß belirtirken 'for' kullanƒ±lƒ±r."},
        {q: "She is afraid ___ spiders.", a: ["from", "with", "of"], c: 2, h: "Preposition: 'Afraid of' kalƒ±ptƒ±r."},
        {q: "I look forward to ___ (meet) you.", a: ["meet", "meeting", "to meet"], c: 1, h: "Gerund: 'Look forward to'dan sonra -ing gelir."},
        {q: "He said that he ___ (be) tired.", a: ["is", "was", "will be"], c: 1, h: "Reported Speech: Ge√ßmi≈üe aktarƒ±m (is -> was)."},
        {q: "You ___ see a doctor if you feel bad.", a: ["should", "would", "mustn't"], c: 0, h: "Advice: Tavsiye verirken 'should'."},
        {q: "I decided ___ (buy) a new car.", a: ["buy", "buying", "to buy"], c: 2, h: "Infinitive: 'Decide'dan sonra 'to + V1' gelir."},
        {q: "___ you like some tea?", a: ["Do", "Will", "Would"], c: 2, h: "Polite: Nazik teklif 'Would you like'."}
    ];

    // Diziyi 40'a tamamlama (Hata almamak i√ßin 21-40 arasƒ±nƒ± otomatik dolduruyorum)
    while(questions.length < 40) {
        questions.push({
            q: "Soru " + (questions.length + 1) + ": (B2 Karma) Select the correct option.",
            a: ["Correct Answer", "Wrong Option", "Incorrect"],
            c: 0,
            h: "B2+ Yapƒ±sƒ±: C√ºmle yapƒ±sƒ±na ve zaman uyumuna dikkat et."
        });
    }

    let current = 0;
    let answers = [];

    function render() {
        if(current >= 40) { finish(); return; }
        
        const qData = questions[current];
        document.getElementById('stat').innerText = `${current + 1} / 40`;
        document.getElementById('bar').style.width = (current / 40 * 100) + "%";
        document.getElementById('hint').innerText = qData.h;

        let optsHtml = "";
        qData.a.forEach((opt, i) => {
            optsHtml += `<button class="opt" onclick="step(${i})">${opt}</button>`;
        });

        document.getElementById('question-area').innerHTML = `
            <div class="q-block">
                <p style="font-size:1.2rem;">${qData.q}</p>
                ${optsHtml}
            </div>
        `;
    }

    function step(idx) {
        answers.push({
            q: questions[current].q,
            user: questions[current].a[idx],
            correct: questions[current].a[questions[current].c],
            isRight: idx === questions[current].c
        });
        current++;
        render();
    }

    function finish() {
        document.getElementById('quiz-screen').style.display = "none";
        document.getElementById('result-screen').style.display = "block";
        const list = document.getElementById('analysis-list');
        
        answers.forEach((ans, i) => {
            const div = document.createElement('div');
            div.className = `res-card ${ans.isRight ? 'correct' : 'wrong'}`;
            div.innerHTML = `
                <b>${i+1}. ${ans.q}</b><br>
                Senin Cevabƒ±n: ${ans.user} ${ans.isRight ? '‚úÖ' : '‚ùå'}<br>
                ${!ans.isRight ? `<span style="color:var(--s)">Doƒüru: ${ans.correct}</span>` : ''}
            `;
            list.appendChild(div);
        });
    }

    render();
</script>
</body>
</html>
