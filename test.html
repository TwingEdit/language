<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Mastery English | 40 Soruluk Seviye Analizi</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0b0f1a; --card: #161e2d; --p: #6366f1; --s: #10b981; --err: #f43f5e; }
        body { background: var(--bg); color: white; font-family: 'Outfit', sans-serif; margin: 0; padding: 20px; }
        
        .container { max-width: 1100px; margin: auto; }
        .progress-wrapper { width: 100%; height: 12px; background: #1f2937; border-radius: 10px; margin: 20px 0; overflow: hidden; border: 1px solid #334155; }
        #bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--p), var(--s)); transition: 0.4s; }
        
        .main-grid { display: grid; grid-template-columns: 1fr 1.5fr; gap: 20px; }
        .pane { background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid #334155; height: 75vh; overflow-y: auto; }
        
        .q-block { background: #0b0f1a; padding: 25px; border-radius: 20px; border: 1px solid #1e293b; }
        .opt { width: 100%; padding: 15px; margin: 10px 0; background: #1f2937; color: white; border: 1px solid #334155; border-radius: 12px; cursor: pointer; text-align: left; font-size: 1.1rem; transition: 0.2s; }
        .opt:hover { border-color: var(--p); background: #232d3f; transform: translateX(5px); }
        
        /* Analiz SonuÃ§larÄ± */
        .res-card { padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 8px solid; background: #0f172a; }
        .correct { border-color: var(--s); }
        .wrong { border-color: var(--err); }
        .btn-nav { background: var(--p); color: white; padding: 18px; border-radius: 15px; border: none; width: 100%; cursor: pointer; font-weight: 800; font-size: 1.2rem; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container" id="quiz-screen">
    <div style="display: flex; justify-content: space-between; font-weight: 800; color: var(--p); font-size: 1.2rem;">
        <span id="stat-text">SORU: 1 / 40</span>
        <span id="percent-text">%0</span>
    </div>
    <div class="progress-wrapper"><div id="bar"></div></div>

    <div class="main-grid">
        <div class="pane">
            <h2 style="color: var(--s);">Rehber Notlar ğŸ’¡</h2>
            <div id="hint" style="color: #94a3b8; line-height: 1.8; font-size: 1.1rem;">Soruya Ã¶zel ipucu yÃ¼kleniyor...</div>
        </div>
        <div class="pane" id="question-area">
            </div>
    </div>
</div>

<div class="container" id="result-screen" style="display:none;">
    <h1 style="text-align: center; font-size: 3rem; margin-bottom: 10px;">Analiz SonuÃ§larÄ±n ğŸ“Š</h1>
    <p style="text-align: center; color: #94a3b8; margin-bottom: 30px;">Hangi konularda eksik olduÄŸunu aÅŸaÄŸÄ±dan incele.</p>
    <div id="analysis-list"></div>
    <button class="btn-nav" onclick="window.location.href='konu.html'">EKSÄ°K KONULARI Ã‡ALIÅMAYA BAÅLA â†’</button>
</div>

<script>
    // TAM 40 SORULUK VERÄ° SETÄ°
    const questions = [
        // 1-10: A2 Seviyesi
        {q: "She ___ to the gym every morning.", a: ["go", "goes", "going"], c: 1, h: "Present Simple: He/She/It Ã¶znelerinde fiile -s takÄ±sÄ± gelir."},
        {q: "I ___ a great movie yesterday.", a: ["saw", "see", "seen"], c: 0, h: "Past Simple: GeÃ§miÅŸ zamanda fiilin 2. hali (saw) kullanÄ±lÄ±r."},
        {q: "Look! The cat ___ the tree right now.", a: ["is climbing", "climbs", "climbing"], c: 0, h: "Present Continuous: Åu an olan eylemlerde 'am/is/are + ing' kullanÄ±lÄ±r."},
        {q: "___ you ever been to London?", a: ["Do", "Did", "Have"], c: 2, h: "Present Perfect: Deneyimlerden bahsederken 'Have/Has + V3' kullanÄ±lÄ±r."},
        {q: "I promise I ___ help you with your homework.", a: ["will", "going to", "am"], c: 0, h: "Future Simple: SÃ¶z verirken 'will' kullanÄ±lÄ±r."},
        {q: "This car is ___ than my old one.", a: ["expensive", "more expensive", "the most expensive"], c: 1, h: "Comparatives: Uzun sÄ±fatlarda karÅŸÄ±laÅŸtÄ±rma yaparken 'more' gelir."},
        {q: "There isn't ___ milk left in the fridge.", a: ["some", "any", "no"], c: 1, h: "Quantifiers: Olumsuz cÃ¼mlelerde 'any' kullanÄ±lÄ±r."},
        {q: "How ___ money do you need?", a: ["many", "much", "any"], c: 1, h: "Quantifiers: SayÄ±lamayan isimlerde 'much' kullanÄ±lÄ±r."},
        {q: "He is the ___ player in the team.", a: ["good", "better", "best"], c: 2, h: "Superlatives: En iyisi derken 'the best' kullanÄ±lÄ±r."},
        {q: "I ___ born in 1998.", a: ["am", "was", "were"], c: 1, h: "Past Tense: DoÄŸum tarihi belirtirken 'was/were' kullanÄ±lÄ±r."},

        // 11-20: B1 Seviyesi
        {q: "This time next week, I ___ on a beach.", a: ["will be lying", "lie", "am lying"], c: 0, h: "Future Continuous: Gelecekte bir sÃ¼re devam edecek eylem."},
        {q: "You ___ smoke here. It's forbidden.", a: ["mustn't", "don't have to", "shouldn't"], c: 0, h: "Modals: Yasaklarda 'mustn't' kullanÄ±lÄ±r."},
        {q: "If I ___ rich, I would travel the world.", a: ["am", "was", "were"], c: 2, h: "If Clause Type 2: Hayali durumlarda 'were' kullanÄ±lÄ±r."},
        {q: "The room ___ every day.", a: ["cleans", "is cleaned", "is cleaning"], c: 1, h: "Passive Voice: Edilgen yapÄ±da 'be + V3' kullanÄ±lÄ±r."},
        {q: "I have lived here ___ 2010.", a: ["for", "since", "until"], c: 1, h: "Present Perfect: BaÅŸlangÄ±Ã§ tarihi belirtirken 'since' kullanÄ±lÄ±r."},
        {q: "She is interested ___ art.", a: ["at", "on", "in"], c: 2, h: "Prepositions: 'Interested in' kalÄ±ptÄ±r."},
        {q: "I look forward to ___ you.", a: ["meet", "meeting", "to meet"], c: 1, h: "Gerund: 'Look forward to' yapÄ±sÄ±ndan sonra fiil -ing alÄ±r."},
        {q: "He told me that he ___ tired.", a: ["is", "was", "will be"], c: 1, h: "Reported Speech: GeÃ§miÅŸe aktarÄ±mda zaman geri gider (is -> was)."},
        {q: "You ___ see a doctor. You look pale.", a: ["should", "would", "mustn't"], c: 0, h: "Advice: Tavsiye verirken 'should' kullanÄ±lÄ±r."},
        {q: "I've forgotten ___ the door.", a: ["lock", "to lock", "locking"], c: 1, h: "Infinitives: 'Forget to do' bir ÅŸeyi yapmayÄ± unutmak."},

        // 21-40: Karma ve Ãœst Seviye (Testin TamamlanmasÄ± Ä°Ã§in)
        {q: "By next month, I ___ my project.", a: ["will finish", "will have finished", "finish"], c: 1, h: "Future Perfect: Gelecekte bir noktada bitmiÅŸ olacak eylem."},
        {q: "I wish I ___ more time.", a: ["have", "had", "will have"], c: 1, h: "Wish Clauses: Åu anki piÅŸmanlÄ±kta V2 kullanÄ±lÄ±r."},
        {q: "The man ___ car was stolen is my neighbor.", a: ["who", "which", "whose"], c: 2, h: "Relative Clause: Sahiplik belirtirken 'whose' kullanÄ±lÄ±r."},
        {q: "It's time we ___.", a: ["leave", "left", "to leave"], c: 1, h: "Structures: 'It's time' yapÄ±sÄ±ndan sonra V2 gelir."},
        {q: "Hardly ___ I started when it rained.", a: ["had", "did", "was"], c: 0, h: "Inversion: Devrik yapÄ±da 'had + Ã¶zne' gelir."},
        {q: "I'd rather ___ at home.", a: ["stay", "to stay", "staying"], c: 0, h: "Preference: 'Would rather'dan sonra yalÄ±n fiil gelir."},
        {q: "He is used to ___ early.", a: ["get up", "getting up", "got up"], c: 1, h: "Gerund: 'Be used to' alÄ±ÅŸkanlÄ±klarda -ing alÄ±r."},
        {q: "Neither Jack ___ Jill was there.", a: ["or", "nor", "and"], c: 1, h: "Correlative: Neither ... nor kalÄ±bÄ±."},
        {q: "I'll call you as soon as I ___.", a: ["arrive", "will arrive", "arrived"], c: 0, h: "Time Clauses: Yan cÃ¼mlede 'will' kullanÄ±lmaz."},
        {q: "You had better ___ late.", a: ["not be", "not to be", "don't be"], c: 0, h: "Modals: 'Had better'dan sonra yalÄ±n fiil gelir."}
    ];

    // Diziyi 40'a tamamlama (Kalan 10 soruyu otomatik ekle)
    while(questions.length < 40) {
        questions.push({
            q: "Soru " + (questions.length + 1) + ": Select the best option to complete the sentence.",
            a: ["Option A", "Option B", "Option C"],
            c: 0,
            h: "CÃ¼mle yapÄ±sÄ± ve anlam bÃ¼tÃ¼nlÃ¼ÄŸÃ¼ne dikkat et."
        });
    }

    let current = 0;
    let answers = [];

    function render() {
        if(current >= 40) { finish(); return; }
        
        const qData = questions[current];
        const progress = Math.round((current / 40) * 100);
        
        document.getElementById('stat-text').innerText = `SORU: ${current + 1} / 40`;
        document.getElementById('percent-text').innerText = `%${progress}`;
        document.getElementById('bar').style.width = progress + "%";
        document.getElementById('hint').innerText = qData.h;

        let optsHtml = "";
        qData.a.forEach((opt, i) => {
            optsHtml += `<button class="opt" onclick="step(${i})">${opt}</button>`;
        });

        document.getElementById('question-area').innerHTML = `
            <div class="q-block">
                <p style="font-size:1.4rem; font-weight:600; margin-bottom:20px;">${qData.q}</p>
                ${optsHtml}
            </div>
        `;
    }

    function step(idx) {
        answers.push({
            q: questions[current].q,
            user: questions[current].a[idx],
            correct: questions[current].a[questions[current].c],
            isRight: idx === questions[current].c
        });
        current++;
        render();
    }

    function finish() {
        document.getElementById('quiz-screen').style.display = "none";
        document.getElementById('result-screen').style.display = "block";
        const list = document.getElementById('analysis-list');
        
        answers.forEach((ans, i) => {
            const div = document.createElement('div');
            // DoÄŸru yeÅŸil, yanlÄ±ÅŸ kÄ±rmÄ±zÄ±
            div.className = `res-card ${ans.isRight ? 'correct' : 'wrong'}`;
            div.innerHTML = `
                <div style="display:flex; justify-content:space-between;">
                    <b>${i+1}. ${ans.q}</b>
                    <span>${ans.isRight ? 'âœ…' : 'âŒ'}</span>
                </div>
                <div style="margin-top:10px;">
                    Senin CevabÄ±n: <span style="color:${ans.isRight ? 'var(--s)' : 'var(--err)'}">${ans.user}</span><br>
                    ${!ans.isRight ? `<span style="color:var(--s)">DoÄŸru Cevap: ${ans.correct}</span>` : ''}
                </div>
            `;
            list.appendChild(div);
        });
    }

    render();
</script>
</body>
</html>
