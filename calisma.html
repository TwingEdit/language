<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Mastery Tense Academy | Fixed Version</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0b0f1a; --card: #161e2d; --p: #6366f1; --s: #10b981; --err: #f43f5e; }
        body { background: var(--bg); color: white; font-family: 'Outfit', sans-serif; margin: 0; padding: 20px; }
        
        /* Dinamik Progress Bar */
        .progress-wrapper { width: 100%; height: 14px; background: #1f2937; border-radius: 20px; margin-bottom: 20px; overflow: hidden; display: none; border: 1px solid #334155; box-shadow: inset 0 2px 4px rgba(0,0,0,0.3); }
        #bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--p), #818cf8); transition: 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .q-counter { font-size: 1.1rem; color: var(--p); font-weight: 800; margin-bottom: 10px; display: none; display: flex; justify-content: space-between; }

        .grid-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 900px; margin: 50px auto; }
        .box { background: var(--card); height: 200px; border-radius: 30px; border: 2px solid #334155; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; transition: 0.3s; }
        .box:hover { border-color: var(--p); transform: translateY(-5px); box-shadow: 0 10px 30px rgba(99, 102, 241, 0.2); }

        .workspace { display: none; grid-template-columns: 1.1fr 0.9fr; gap: 25px; max-width: 1500px; margin: auto; height: 88vh; }
        .pane { background: var(--card); padding: 35px; border-radius: 30px; border: 1px solid #334155; overflow-y: auto; }
        .active { display: grid !important; }

        table { width: 100%; border-collapse: collapse; margin: 20px 0; background: #0b0f1a; border-radius: 15px; overflow: hidden; }
        th, td { border: 1px solid #1f2937; padding: 15px; text-align: left; }
        th { background: var(--p); color: white; }

        .tense-btn { background: #1f2937; color: #cbd5e1; padding: 18px; margin: 10px 0; border-radius: 15px; cursor: pointer; border: 1px solid #334155; width: 100%; text-align: left; font-weight: 600; }
        .tense-btn:hover { border-color: var(--p); background: #2d3748; padding-left: 25px; }

        .q-block { background: #0b0f1a; padding: 25px; border-radius: 20px; margin-bottom: 25px; border: 1px solid #1e293b; transition: 0.3s; }
        .opt-btn { width: 100%; padding: 14px; margin: 8px 0; background: #1f2937; border: 1px solid #334155; color: #94a3b8; border-radius: 12px; cursor: pointer; text-align: left; }
        .opt-btn:disabled { cursor: default; }
    </style>
</head>
<body>

    <div id="main-menu" class="grid-menu">
        <div class="box" onclick="show('konu')"><h1>üìö</h1><h3>KONU VE TESTLER</h3></div>
        <div class="box" onclick="show('kelime')"><h1>üî§</h1><h3>KELƒ∞ME HAVUZU</h3></div>
    </div>

    <div id="ws" class="workspace">
        <div class="pane">
            <button onclick="location.reload()" style="background:#334155; color:white; border:none; padding:12px 25px; border-radius:12px; cursor:pointer; margin-bottom:25px;">‚Üê ANA MEN√ú</button>
            <div id="left-pane"></div>
        </div>
        <div class="pane">
            <div class="q-counter" id="q-header" style="display:none;">
                <span>ƒ∞LERLEME</span>
                <span id="q-stat">0 / 0</span>
            </div>
            <div class="progress-wrapper" id="p-wrap"><div id="bar-fill"></div></div>
            <div id="right-pane"></div>
        </div>
    </div>

<script>
    const tensesData = {
        "Simple Present": {
            desc: "Genel doƒürular ve alƒ±≈ükanlƒ±klar. He/She/It fiile -s takƒ±sƒ± alƒ±r.",
            table: "<table><tr><th>Simple Present</th><th>√ñrnek</th></tr><tr><td>Olumlu</td><td>She works.</td></tr><tr><td>Olumsuz</td><td>He doesn't work.</td></tr></table>",
            quiz: [
                {q: "She ___ (play) tennis.", a: ["play", "plays", "playing"], c: 1},
                {q: "They ___ (not/eat) meat.", a: ["don't eat", "doesn't eat", "aren't eat"], c: 0},
                {q: "___ he live here?", a: ["Do", "Does", "Is"], c: 1},
                {q: "I ___ (be) happy.", a: ["am", "is", "are"], c: 0},
                {q: "The sun ___ (rise).", a: ["rise", "rises", "rising"], c: 1},
                {q: "We ___ (study) English.", a: ["study", "studies", "studying"], c: 0},
                {q: "___ you smoke?", a: ["Do", "Does", "Are"], c: 0},
                {q: "It ___ (rain) a lot.", a: ["rain", "rains", "raining"], c: 1},
                {q: "Who ___ (be) they?", a: ["am", "is", "are"], c: 2},
                {q: "Birds ___ (fly).", a: ["fly", "flys", "flying"], c: 0}
            ]
        },
        "Simple Past": {
            desc: "Ge√ßmi≈üte bitmi≈ü olaylar. Fiilin 2. hali (V2) kullanƒ±lƒ±r.",
            table: "<table><tr><th>Simple Past</th><th>√ñrnek</th></tr><tr><td>Olumlu</td><td>I went home.</td></tr></table>",
            quiz: [
                {q: "I ___ (see) him yesterday.", a: ["saw", "see", "seen"], c: 0},
                {q: "Did you ___ (call)?", a: ["call", "called", "calling"], c: 0},
                {q: "She ___ (not/be) there.", a: ["wasn't", "weren't", "didn't be"], c: 0},
                {q: "They ___ (go) to Paris.", a: ["go", "went", "gone"], c: 1},
                {q: "We ___ (stay) home.", a: ["stay", "stayed", "staying"], c: 1},
                {q: "When ___ it happen?", a: ["did", "do", "was"], c: 0},
                {q: "He ___ (break) his arm.", a: ["breaked", "broke", "broken"], c: 1},
                {q: "I ___ (not/know).", a: ["don't know", "didn't know", "wasn't know"], c: 1},
                {q: "___ they happy?", a: ["Did", "Were", "Was"], c: 1},
                {q: "It ___ (start) early.", a: ["start", "started", "starting"], c: 1}
            ]
        }
        // Diƒüer tenseler (Future, Perfect vb.) buraya aynƒ± yapƒ±da eklenmelidir.
    };

    let answeredCount = 0;
    let currentQuizLength = 0;

    function show(type) {
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('ws').classList.add('active');
        if(type === 'konu') loadTenseMenu();
    }

    function loadTenseMenu() {
        const left = document.getElementById('left-pane');
        left.innerHTML = "<h2>Zamanlarƒ± √ñƒüren</h2>";
        Object.keys(tensesData).forEach(t => {
            left.innerHTML += `<button class="tense-btn" onclick="startLesson('${t}')"><b>${t}</b> ‚Üí</button>`;
        });
    }

    function startLesson(t) {
        const data = tensesData[t];
        answeredCount = 0;
        currentQuizLength = data.quiz.length;

        // UI Hazƒ±rlƒ±ƒüƒ±
        document.getElementById('left-pane').innerHTML = `<h2>${t}</h2><p>${data.desc}</p>${data.table}`;
        document.getElementById('q-header').style.display = 'flex';
        document.getElementById('p-wrap').style.display = 'block';
        document.getElementById('bar-fill').style.width = '0%';
        document.getElementById('q-stat').innerText = `0 / ${currentQuizLength}`;

        const right = document.getElementById('right-pane');
        right.innerHTML = `<h3>${t} Testi</h3>`;
        
        data.quiz.forEach((q, i) => {
            let opts = "";
            q.a.forEach((opt, oi) => {
                opts += `<button class="opt-btn" onclick="handleSelect(this, ${oi==q.c})">${opt}</button>`;
            });
            right.innerHTML += `<div class="q-block" id="q-box-${i}"><p><b>${i+1}.</b> ${q.q}</p>${opts}</div>`;
        });
    }

    function handleSelect(btn, isCorrect) {
        const parent = btn.parentElement;
        const allBtns = parent.querySelectorAll('button');
        
        // Sadece bir kez tƒ±klanabilir yap
        allBtns.forEach(b => b.disabled = true);
        
        if(isCorrect) {
            btn.style.background = 'rgba(16, 185, 129, 0.2)';
            btn.style.borderColor = 'var(--s)';
            btn.innerHTML += " ‚úÖ";
        } else {
            btn.style.background = 'rgba(244, 63, 94, 0.2)';
            btn.style.borderColor = 'var(--err)';
            btn.innerHTML += " ‚ùå";
        }

        // Bar ve ƒ∞statistik G√ºncelleme
        answeredCount++;
        const percent = (answeredCount / currentQuizLength) * 100;
        document.getElementById('bar-fill').style.width = percent + '%';
        document.getElementById('q-stat').innerText = `${answeredCount} / ${currentQuizLength}`;

        if(answeredCount === currentQuizLength) {
            setTimeout(() => {
                alert("Tebrikler! Testi tamamladƒ±n. Ba≈üka bir konuya ge√ßebilirsin.");
                document.getElementById('bar-fill').style.background = 'var(--s)';
            }, 500);
        }
    }
</script>
</body>
</html>
